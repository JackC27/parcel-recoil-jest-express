<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import ReactDOM from "react-dom";
import {
  RecoilRoot,
  atom,
  selector,
  useRecoilState,
  useRecoilValue,
  useSetRecoilState,
} from 'recoil';

//current state of text editor
//receives updates onChange

/** Editor State Atom */
const editorStateAtom = atom({
  key: "editorStateAtom",
  default: ""
})

//Editor state updater selector.
//I guess we can use this to update state as well? 

/** Editor State Selector */
const updateEditorSelector = selector({
  key: 'editorStateSelector',
  get: ({get}) => ( get(editorStateAtom) ),
  set: ({set}, newValue) => { set(editorStateAtom, newValue) }
})

const wordCountAtom = atom({
  key: "wordCountAtom",
  default: 0,
})

const atomWithNoSelector = atom({
  key: "bigbadwilly",
  default: "Play on"
})

const wordCountSelector = selector({
  key: "wordCountSelector", 
  get: ({get}) => ( get(wordCountAtom) ),
  set: ({set}, newValue) => { set(wordCountAtom, newValue) }
})

//Components that need to read from and write to an atom should use useRecoilState() as shown below:
function EditorText(props) {
  const [copy, setEditorText] = useRecoilState(updateEditorSelector);
  
  const setCounterInt = useSetRecoilState(wordCountSelector);
  
  const captureText = e => {
    setEditorText(e.target.value); 
    captureSpaces(e)
  }

  const captureSpaces = k => {
    let x = k.target.value.split(" ");
    let xLen = x.length;
    if(x [ xLen - 1 ].length &lt; 1){
      xLen = xLen-1
    }
    setCounterInt(xLen);
  }

  return (
    &lt;div className="container">
      &lt;p id='title'>{props.heading}&lt;/p>      
      &lt;div id='editor'>
        &lt;textarea id="editorInput" onChange={captureText} value={copy}>&lt;/textarea>
      &lt;/div>
    &lt;/div>
  )
}

function WordCount(){
  const counter = useRecoilValue(wordCountAtom);

  return (
    &lt;div className="container">
      &lt;p id='count'>Word Count: {counter}&lt;/p>
    &lt;/div>
  )
}

function Button(props){
  return (
    &lt;button className={props.value} onClick={props.action}>{props.value}&lt;/button>
  )
}

function ButtonRow(props) {
  let save = useRecoilValue(editorStateAtom);
  console.log( save );
  return(
    &lt;div className={props.className}>
      &lt;Button action = { () => console.log(save) } value = "Save" />
      &lt;Button action = { () => console.log(" DELETE ") }value = "Delete" />
      &lt;Button action = { () => console.log(" STASH ") }value = "Stash" /> 
    &lt;/div>
  )

}

function CallHook(props){
  let playing = useRecoilState(atomWithNoSelector);
  return(
    &lt;>
      &lt;p>{playing}&lt;/p> {/*Throws an because: "Functions are not valid as React child*/}
      &lt;p>{props.what}&lt;/p>
    &lt;/>
  )
}

function App() {
  return (
    &lt;RecoilRoot>      
      &lt;EditorText heading = "Simple text editing with word count" />
      &lt;WordCount />
      &lt;ButtonRow className="buttons-container" />
      &lt;CallHook what="tamborine" />
    &lt;/RecoilRoot>
  );
}

ReactDOM.render(App(), document.getElementById("app"))

module.exports(EditorText);</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#editorStateAtom">editorStateAtom</a></li><li><a href="global.html#updateEditorSelector">updateEditorSelector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.5</a> on Tue Aug 18 2020 14:27:34 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
